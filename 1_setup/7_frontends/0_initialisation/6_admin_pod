apiVersion: v1
kind: Pod
metadata:
  name: admin
  namespace: kafka
spec:
  #serviceAccountName: kubectl
  containers:
    - name: main
      image: alpine:3.17
      command:
        - sh
        - "-c"
        - "sleep 3000"
      env:
        - name: GITHUB_REPOSITORY
          value: "ThinkportRepo/big-data-on-k8s-workshop.git"
        # - name: GITHUB_USER
        #   valueFrom:
        #     secretKeyRef:
        #       name: github
        #       key: git_user
        # - name: GITHUB_TOKEN
        #   valueFrom:
        #     secretKeyRef:
        #       name: github
        #       key: git_token
      volumeMounts:
        # - mountPath: /workshop
        #   name: workshop
        - mountPath: /kafka-0
          name: datadir-0
        - mountPath: /kafka-1
          name: datadir-1
        - mountPath: /kafka-2
          name: datadir-2
  volumes:
    # - name: workshop
    #   persistentVolumeClaim:
    #     claimName: workshop
    - name: datadir-0
      persistentVolumeClaim:
        claimName: datadir-0-kafka-cp-kafka-0
    - name: datadir-1
      persistentVolumeClaim:
        claimName: datadir-0-kafka-cp-kafka-1
    - name: datadir-2
      persistentVolumeClaim:
        claimName: datadir-0-kafka-cp-kafka-2
